---
title: 2016-12-08 IRC 會議摘要
permalink: /zh_TW/meetings/2016/12/08/
name: 2016-12-08-meeting
type: meetings
layout: page
lang: zh_TW
version: 1
---
{% include toc.html %}

- [本週會議記錄連結](https://botbot.me/freenode/bitcoin-core-dev/2016-12-08/?msg=77680236&page=2)
- [meetbot 會議紀錄](http://www.erisian.com.au/meetbot/bitcoin-core-dev/2016/bitcoin-core-dev.2016-12-08-19.00.html)

---

## 備註 / 簡短議題

- Github 現在支援為你的 PR 列出審查者
- 隔離見證支援 [getblocktemplate][BIP23] 實作需要一些緊急[審查](https://github.com/bitcoin/libblkmaker/pull/6)，因為一些下游礦工需要它來支援 segwit

## 主要議題

- 使 RelayWalletTransaction 嘗試 AcceptToMemoryPool
- 記憶池過期時間增加

## 使 RelayWalletTransaction 嘗試 AcceptToMemoryPool

### 背景

拉取請求 [#9290][]（使 RelayWalletTransaction 嘗試 AcceptToMemoryPool）修復了一個問題，即先前因無法進入記憶池而未能中繼的錢包交易，在重新啟動之前不會再次嘗試，即使記憶池條件可能已經改變。連同拉取請求 [#9262][]（偏好祖先較少的幣，在 ATMP 之前進行合理性檢查）一起，它們修復了一些使用者正常使用錢包可能導致無法解釋的失敗的情況，原因是在記憶池中建立長交易鏈。這些長交易鏈會使發送看起來失敗，但它仍然會進入錢包並可能稍後廣播（重新啟動後）。使用者失去對其資金的存取權，並可能錯誤地認為錢包是空的。導致可能的重複支付。

### 會議討論

拉取請求描述中表達的擔憂來自 morcos，但他被 sdaftuar 說服並同意該 PR。他對回移它仍有一些疑慮，對於 [#9262][] 肯定也是。他擔心，由於這些是行為上相當大的變更，它們不會得到足夠的測試以確保它們不會引發新問題。

這種行為已經存在好幾個版本了，然而最近由於偶爾的記憶池積壓，這已經成為一個更大的問題。

Gmaxwell 希望看到 [#9262][] 或 [#9290][] 被回移，但如果只有一個，更偏好 [#9290][]。Morcos 對 [#9290][] 也感覺更輕鬆，因為它相當簡單。

Morcos 和 Wumpus 希望專注於 0.14 的良好解決方案，而不是急於在 0.13.2 中實現。0.13.2 的 RC1 應該可能在 12 月發布，以避免與 0.14 重疊。

Sipa 想知道是否有處理 createTransaction 中 AcceptToMemoryPool（ATMP）失敗的修補程式。[#9262][] 會使你到達 ATMP 失敗的可能性大大降低。[#9262][] 使它更不可能遇到 ATMP 失敗，但 sipa 會更放心有一些正確處理偶爾失敗的東西，而不是盡力避免失敗。這樣你就會知道你的交易沒有立即廣播。Gmaxwell 認為我們從來不真正知道這一點，因為我們沒有監控來告訴廣播是否成功。

Sdaftuar 提出一個簡單的回移，將失敗 ATMP 的交易的交易 ID 返回給 RPC 呼叫者，一旦它被添加到錢包。Sipa 在會議期間進行了一個[拉取請求][#9302]。

Luke-jr 指出，也可以通過將 -spendzeroconfchange 的預設值設置為 0 來解決這個問題，但這將是一個破壞性的變更，只有在真正嚴重的問題時才應該考慮。

### 會議結論

- 審查主分支和回移的 [#9290][]（使 RelayWalletTransaction 嘗試 AcceptToMemoryPool）、[#9302][]（即使新交易的 ATMP 失敗也返回 txid）以及可選的回移 [#9262][]（偏好祖先較少的幣，在 ATMP 之前進行合理性檢查）

## 記憶池過期時間增加

### 背景

目前在記憶池中停留超過 3 天的交易會從記憶池中移除。Morcos 提議將此過期時間增加到 2 週。

### 會議討論

Morcos 認為，如果我們想充分利用交易量的每週週期，我們需要有停留一週或更長時間的交易來測量它們需要多長時間才能得到確認。

Gmaxwell 指出，過期會移除被軟分叉出去但佔用你的記憶池的高手續費交易。然而，3 天的過期時間無論如何都會搞亂手續費估算。

Sdaftuar 指出，3 天與一週的另一個優勢是能夠雙重花費手續費太低的交易，但在引入手續費提升後，這個問題在很大程度上消失了。Gmaxwell 認為，即使在一天之後，非可替換交易的替換現在也能工作，這是由於重新啟動和全 rbf 礦工。

### 會議結論

- 提出一個 [PR][#9312] 來增加過期時間並獲得更多想法和問題。

## 幽默時刻

{% highlight text %}
8:45  MarcoFalke      #action 建立報告 txid 修補程式
8:45  sipa            MarcoFalke_: 已經在做了
8:45 jonasschnelli    sipa: 棒！
...
8:50 bitcoin-git      sipa 開啟了拉取請求 #9302：即使新交易的 ATMP 失敗也返回 txid https://github.com/bitcoin/bitcoin/pull/9302
8:52 morcos           謝謝 sipa
8:52 jonasschnelli    是的。謝謝 sipa。
8:53 jonasschnelli    下次請更快一點
{% endhighlight %}

## 參與者

| IRC nick        | Name/Nym                  |
|-----------------|---------------------------|
| sipa            | [Pieter Wuille][]         |
| gmaxwell        | [Gregory Maxwell][]       |
| wumpus          | [Wladimir van der Laan][] |
| morcos          | [Alex Morcos][]           |
| Chris_Stewart_5 | [Chris Stewart][]         |
| jonasschnelli   | [Jonas Schnelli][]        |
| Michagogo       | [Michagogo][]             |
| instagibbs      | [Gregory Sanders][]       |
| sdaftuar        | [Suhas Daftuar][]         |
| kanzure         | [Bryan Bishop][]          |
| luke-jr         | [Luke Dashjr][]           |
| btcdrak         | [BtcDrak][]               |
| MarcoFalke      | [Marco Falke][]           |
| CodeShark       | [Eric Lombrozo][]         |

## 免責聲明

本摘要編寫時未徵詢任何討論參與者的意見，因此任何錯誤均為摘要作者的責任，而非討論參與者的責任。

[#9290]: https://github.com/bitcoin/bitcoin/pull/9290
[#9262]: https://github.com/bitcoin/bitcoin/pull/9262
[#9302]: https://github.com/bitcoin/bitcoin/pull/9302
[#9312]: https://github.com/bitcoin/bitcoin/pull/9312

{% include references.md %}
