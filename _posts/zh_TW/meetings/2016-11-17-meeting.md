---
title: 2016-11-17 IRC 會議摘要
permalink: /zh_TW/meetings/2016/11/17/
name: 2016-11-17-meeting
type: meetings
layout: page
lang: zh_TW
version: 1
---
{% include toc.html %}

- [本週會議記錄連結](https://botbot.me/freenode/bitcoin-core-dev/2016-11-17/?msg=76630924&page=2)
- [meetbot 會議紀錄](http://www.erisian.com.au/meetbot/bitcoin-core-dev/2016/bitcoin-core-dev.2016-11-17-19.04.html)

---

## 主要議題

- Shared_ptr
- 移除優先級
- 移除帳戶
- 輔助區塊請求

## Shared_ptr

### 背景

在許多地方，我們已經開始使用 'shared_ptr' 而不是物件本身，這樣它可以在許多資料結構之間共享，而無需製作副本。

### 會議討論

Sipa 有一系列 3 個拉取請求，在更多地方引入 shared_ptr，即 [#9125][]（使 CBlock 成為 CTransactions 的 shared_ptr 的向量）、[#8580][]（使 CTransaction 真正不可變）和 [#8589][]（在 CTxIn 中內嵌 CTxInWitness（在 #8580 之上））。第一個是後續請求的必要重構，性能提升 3-4%。第二個可能更具爭議性，因為它顯著影響錢包程式碼。Wumpus 認為 CwalletTx 繼承自 CTransaction 的舊行為是濫用繼承的一個很好的例子。

### 會議結論

- 審查 [#9125][]

## 移除優先級

### 背景

優先級系統過去根據年齡、大小和輸入數量為交易分配優先級，使得一些交易免費。這有大量程式碼基礎，已經努力移除該系統，因為不能期望礦工繼續包含 0 手續費交易。

### 會議討論

Morcos 指出，優先級程式碼不再提供任何功能，也許可以設定一個目標，在 0.15 中移除所有優先級程式碼。Luke-Jr 可能不同意這一點，儘管他沒有出席會議。已經合併了很多朝向優先級的東西。

Gmaxwell 同意，並認為保留優先級的任何願望都可以通過明智地使用手續費差異來回答。

「移除優先級」有 4 個組成部分：rpc、估算、挖礦和中繼。估算已經被移除。Gmaxwell 希望看到中繼被移除，因為它目前造成頻寬浪費，因為它正在中繼不會被挖出的交易。

### 會議結論

- 變更預設值以停用優先級中繼。
- 與 Luke-Jr 重新討論，因為他是保留優先級的主要支持者，但未出席會議

## 移除帳戶

### 背景

目前 bitcoin-core 使用帳戶系統。使用此功能的第三方可能會遇到多個問題，[很久以前](https://github.com/bitcoin/bitcoin/issues/3816)就已達成共識，應該移除該系統並由「標籤」系統取代。

### 會議討論

今年早些時候，Wumpus 開啟了一個[拉取請求][#7729]，為錢包引入「標籤」API（在 [2016-07-14 會議](/en/meetings/2016/07/14/#notes--short-topics)中曾提到）。它仍然沒有得到太多審查。

應該首先引入標籤一兩個版本，然後再移除帳戶，因為有些人仍然依賴帳戶系統，但將其用作標籤。

Wumpus 提到應該有保護措施，防止使用者同時使用帳戶和標籤 API，因為這可能會造成問題。

Instagibbs 想知道是否有人與仍然使用帳戶的開發者交談。MarcoFalke 認為 Dooglus 使用它，但他的使用情境會被新的標籤 API 涵蓋。

### 會議結論

- 審查 [#7729][]（rpc：為錢包引入「標籤」API）
- 向 dooglus 詢問使用者回饋

## 輔助區塊請求

### 背景

Jonasschnelli 開啟了一個[拉取請求][#9171]，引入輔助區塊請求（先前稱為「帶外區塊請求」）。此功能允許請求區塊，如果在磁碟上可用，則會被下載並優先於正常 IBD 下載。此變更是執行 SPV 錢包所需的，在[上週會議](/en/meetings/2016/11/10/#hybrid-spv)中討論過。

### 會議討論

多位開發者發現很難理解，並想知道是否有對高層設計及其如何運作的更一般描述。Jonasschnelli 解釋：你問你的節點，給我區塊 "D, F, G"，節點下載區塊 "D, F, G" 並通過 validate=false 的訊號傳遞它

Sipa 喜歡整體概念，但認為實作需要隨著正在進行的網路重構而改變。

BlueMatt 想知道區塊是否真的應該被儲存，或者我們是否可以直接傳遞給錢包。如果它不儲存區塊，在混合模式下將需要下載兩次，所以它至少應該有機會儲存它。BlueMatt 希望看到 p2p 邏輯決定是否將區塊發送到 ProcessNewBlock。

## 幽默時刻

{% highlight text %}
morcos          讓我們談談帳戶或優先級移除的潛力（2 個單獨的議題）
jonasschnelli   #topic 帳戶或優先級移除

jonasschnelli   #topic "移除帳戶"
gmaxwell        「比特幣開發者反對問責制。」

jtimon          我們不能一次性用標籤替換帳戶嗎？
jtimon          我們不是已經警告不要使用帳戶很久了嗎
instagibbs      jtimon，在某個時候我認為人們不相信棄用警告
instagibbs      我們應該放上可怕的 ASCII 藝術 :)

gmaxwell        好的，我認為我們應該採取建議的行動，讓每個人閱讀並評論 7729，然後轉到另一個主題。
gmaxwell        否則，我們可以從事古老的完全無知的戰鬥藝術。
gmaxwell        「我沒有讀過 7729，但我反對任何會導致小孩失明的變更！」
petertodd       gmaxwell：我沒有讀你的上一條評論，但 ACK
jonasschnelli   如果沒有其他議題，我們可以談談「輔助區塊請求」，如果有些人感興趣的話？
jtimon          那是什麼？
gmaxwell        jonasschnelli：那會導致小孩失明嗎？
{% endhighlight %}

## 參與者

| IRC nick        | Name/Nym                  |
|-----------------|---------------------------|
| sipa            | [Pieter Wuille][]         |
| gmaxwell        | [Gregory Maxwell][]       |
| wumpus          | [Wladimir van der Laan][] |
| morcos          | [Alex Morcos][]           |
| jtimon          | [Jorge Timón][]           |
| BlueMatt        | [Matt Corallo][]          |
| Chris_Stewart_5 | [Chris Stewart][]         |
| jonasschnelli   | [Jonas Schnelli][]        |
| Michagogo       | [Michagogo][]             |
| achow101        | [Andrew Chow][]           |
| cfields         | [Cory Fields][]           |
| MarcoFalke      | [Marco Falke][]           |
| CodeShark       | [Eric Lombrozo][]         |
| jcorgan         | [Johnathan Corgan][]      |
| petertodd       | [Peter Todd][]            |
| instagibbs      | [Gregory Sanders][]       |

## 免責聲明

本摘要編寫時未徵詢任何討論參與者的意見，因此任何錯誤均為摘要作者的責任，而非討論參與者的責任。

[#9125]: https://github.com/bitcoin/bitcoin/pull/9125
[#8580]: https://github.com/bitcoin/bitcoin/pull/8580
[#8589]: https://github.com/bitcoin/bitcoin/pull/8589
[#7729]: https://github.com/bitcoin/bitcoin/pull/7729
[#9171]: https://github.com/bitcoin/bitcoin/pull/9171

{% include references.md %}
