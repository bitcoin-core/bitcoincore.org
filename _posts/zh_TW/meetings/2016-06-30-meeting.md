---
title: IRC meeting summary for 2016-06-30
permalink: /zh_TW/meetings/2016/06/30/
name: 2016-06-30-meeting
type: meetings
layout: page
lang: zh_TW
version: 1
---
{% include toc.html %}

- [本週會議記錄連結](https://botbot.me/freenode/bitcoin-core-dev/2016-06-30/?msg=68899079&page=2)
- [Meeting minutes by meetbot](http://www.erisian.com.au/meetbot/bitcoin-core-dev/2016/bitcoin-core-dev.2016-06-30-19.01.html)

---

## 筆記 / 簡短議題

- 許多人正在測試網上測試 segwit + [BIP152][]。目前還沒有相關的 PR，因為這允許測試與非 segwit-BIP152 的互動，並且需要一些 BIP 變更（在 [BIP144][]、[BIP152][] 或單獨的 BIP 中）。最好在 segwit 啟動之前就準備好，否則 compact blocks 會突然停用。

## 主要議題

- 0.13.0 的挖礦相關變更
- Segwit
- Dbcache

## 0.13.0 的挖礦相關變更

### 背景

Sdaftuar 在一個[議題](https://github.com/bitcoin/bitcoin/issues/8294)中提到了一些他認為應該在 0.13.0 中解決的挖礦相關事項。PR [#8295][] 被建立來解決這些問題。

### 會議討論

Blockminsize（設定最小區塊大小）不受 segwit 的封包選擇程式碼支援。由於這個功能對任何人都不再相關，移除它是合理的。目前保留 blockminsize 和 blockmaxsize 的原因是新演算法因缺少會計而無法運作。Sdaftuar 指出這在 [#8295][] 的第一個提交中已解決。當給定 blockminsize 參數時，不應導致失敗，而應給出警告。

AddScoreTxs，舊的交易選擇演算法，可以被移除，因為新的封包選擇演算法絕對優越。Sdaftuar 指出如果我們這樣做，mining_score 可以從記憶體池 multiIndex 中移除，這將在記憶體池中節省一些記憶體。然而這不是優先事項，可以等到 0.14。

發布說明需要為所有挖礦變更撰寫大量內容。

### 會議結論

- 移除 -blockminsize 並在給定該參數時發出警告
- 更新發布說明中的挖礦變更

## Segwit

### 背景

開發者正在開發軟分叉以將隔離見證引入比特幣主網。隔離見證（segwit）允許將交易簽名資料儲存在用於產生交易識別碼的雜湊資料之外，移除所有已知形式的第三方延展性，允許完整節點在不下載所有簽名的情況下編譯當前的 UTXO 集，並為欺詐證明奠定基礎，使輕量級（SPV）客戶端能夠協助執行更多共識規則。segwit 軟分叉還允許礦工用 4 位元組的 segwit 資料替代 1 位元組的區塊空間，為使用 segwit 的錢包增加交易容量。隔離見證 BIP：[BIP141][]、[BIP142][]、[BIP143][]、[BIP144][] 和 [BIP145][]

### 會議討論

在他的[審查](https://petertodd.org/2016/segwit-consensus-critical-code-review)期間，petertodd 發現了由於延展交易造成的潛在記憶體池 DoS 風險（[議題 8279](https://github.com/bitcoin/bitcoin/issues/8279)）。

Gmaxwell 提議在驅逐保護邏輯中將低 dos 分數作為排名標準，這將使以非常高的 DoS 閾值執行更加合理。Sipa 指出如果進行這些變更，DoS 分數也應該隨時間衰減，否則較長時間的連線將累積它們不應得的分數。

Petertodd 希望看到某些節點有不同的閾值期間，這樣雖然不會在所有人身上浪費頻寬，但仍然保持與少數對等節點的連線。Gmaxwell 指出這樣的事情可以將這些對等節點轉變為僅區塊模式，因為這是我們關心的反分區所需的全部，並且幾乎完全消除了 DoS 的擔憂。

Sipa 認為可能有理由引入類似「資源使用分數」的東西，它與「不當行為」不同，用於決定斷開哪些對等節點以支持其他節點，但永遠不會導致封禁。

Gmaxwell 指出 bitcoinXT 最近開始僅與其他 XT 節點建立出站連線，這與 segwit 結合將使它們分區。已在 XT 儲存庫中為此建立了議題。

### 會議結論

- 腦力激盪連線管理相關事項

## Dbcache

### 背景

Gmaxwell 在使用預設 dbcache 進行測試時注意到重新索引非常緩慢，sipa 也確認了這點，他看到了類似的行為。這在[上週的會議](/zh_TW/meetings/2016/06/23/#感知到的驗證速度減緩)中提出。

### 會議討論

Wumpus 建立了 PR [#8273][] 將預設 dbcache 提升至 300 MiB，並將 leveldb 特定快取的配置上限設為 32 MiB，這是目前 100 MiB 的預設值。Gmaxwell 的測試確認 leveldb 快取大小沒有太大影響，但在啟用 txindex 時它們有更多影響。他還注意到即使是 300 MiB 的 dbcache 實際上也不夠大以提供良好的重新索引效能，並提議在 0.14 中考慮在重新索引/初始區塊下載期間將記憶體池記憶體分配給 dbcache。

Jonasschnelli 的測試顯示，master 的重新索引幾乎是從頭開始正常初始區塊下載的兩倍長。他在啟用 -debug 的情況下執行測試，所以可能扭曲了基準測試。他還注意到錯誤 potential_deadlock_detected 每隔幾分鐘就會停止他的節點。他為此建立了一個[議題](https://github.com/bitcoin/bitcoin/issues/8297)。

### 會議結論

- 進一步的基準測試

## 趣味環節

{% highlight text %}
gmaxwell       <meme text="Delete all the code."/>

wumpus         sipa: attenuating theDoS score over time makes sense, a very slow DoS attack isn't really a DoS attack
sipa           theDos? sister of [GLaDoS](https://en.wikipedia.org/wiki/GLaDOS)?
wumpus         the cake is a lie

gmaxwell       Hurrah we ended early. :p
jonasschnelli  1min! :)
gmaxwell       May your usage of the remaining minute be productive.
{% endhighlight %}

## 與會者

| IRC nick      | Name/Nym                  |
|---------------|---------------------------|
| petertodd     | [Peter Todd][]            |
| sipa          | [Pieter Wuille][]         |
| gmaxwell      | [Gregory Maxwell][]       |
| wumpus        | [Wladimir van der Laan][] |
| btcdrak       | [BtcDrak][]               |
| jtimon        | [Jorge Timon][]           |
| CodeShark     | [Eric Lombrozo][]         |
| sdaftuar      | [Suhas Daftuar][]         |
| jonasschnelli | [Jonas Schnelli][]        |
| kanzure       | [Bryan Bishop][]          |
| jl2012        | [Johnson Lau][]           |

## 免責聲明

本摘要由未參與討論的人編撰，因此任何錯誤均為摘要作者的責任，而非討論參與者的責任。

[#8295]: https://github.com/bitcoin/bitcoin/pull/8295
[#8273]: https://github.com/bitcoin/bitcoin/pull/8273

{% include references.md %}
